name: CI Pipeline

on:
  push:
    branches: [main, master]
  pull_request:
    branches: [main, master]

jobs:
  validate:
    name: Validate Code
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Verify required files exist
        run: |
          echo "Checking for required files..."
          if [ ! -f "index.html" ]; then
            echo "Error: index.html not found"
            exit 1
          fi
          if [ ! -f "styles.css" ]; then
            echo "Error: styles.css not found"
            exit 1
          fi
          echo "Required files exist"

      - name: Check HTML files
        run: |
          echo "Checking HTML files..."
          for file in index.html blog.html bmiResult.html myStarterCodes/calculateBMI.html myStarterCodes/hompage.html; do
            if [ -f "$file" ]; then
              echo "Found: $file"
              # Basic HTML structure check
              if grep -q "<!DOCTYPE html>" "$file" || grep -q "<html" "$file"; then
                echo "   Valid HTML structure detected"
              fi
            else
              echo "File not found: $file (optional)"
            fi
          done

      - name: Check CSS file
        run: |
          echo "Checking CSS file..."
          if [ -f "styles.css" ]; then
            echo "styles.css found"
            # Check if file has content
            if [ -s "styles.css" ]; then
              echo "   File contains content"
            else
              echo "   File is empty"
            fi
          fi

      - name: Check JavaScript files
        run: |
          echo "Checking JavaScript files..."
          if [ -f "myStarterCodes/myJavaScriptFile.js" ]; then
            echo "myJavaScriptFile.js found"
          fi
          # Check for inline scripts in HTML
          if grep -r "<script>" *.html 2>/dev/null; then
            echo "Inline JavaScript found in HTML files"
          fi

      - name: Validate project structure
        run: |
          echo "Validating project structure..."
          echo "Project structure check complete"
          echo ""
          echo "Summary:"
          echo "- HTML files: Present"
          echo "- CSS files: Present"
          echo "- JavaScript files: Present"
          echo "- All checks passed!"
